dist: xenial

language: python

matrix:
  include:
    - python: pypy3.5-6.0.0
    - python: pypy3.6-7.0.0
    - python: 3.5
    - python: 3.6
    - python: 3.7
    - python: 3.8

install:
  - python -m pip install --upgrade pip setuptools
  - python -m pip install --upgrade codecov
  - python -m pip install --force-reinstall -r requirements.txt
  - python -m pip install --force-reinstall -r requirements-tests.txt

script:
  - pytest
  - python -m doctest README.md

after_success:
  - python -m codecov -f coverage.xml -X gcov

deploy:
  provider: pypi
  on:
    branch: master
    python: 3.5
  user: __token__
  password:
    secure: eqK8wH42n7VVV4OFeR/EGbcGQsATt2PdiHzUI1GrCMmu9ERu66SMUDY/ZBwQsPr4qlUWaGQEYiXNNZl/VMh2q2cgO918tqy6I8EW5KmSuZcANsymgWgN4KqO5lW3a0MU/qkM1q2u70FAwRs2Hp3qC1Dj7zkVd9pDYn9faxgMty2zumGEMl3cykYjPp1DTMrlUy46ky6Yp1IWEyAullCkEOM0jyfefGLcQTHayFnmY+ESEELJ1eCib5XDAiETT8QCr/Uky4fpay1pXZe8kpwhM4eA4UVDzCxJO+V8E/tTUYpcpwjmOBLR+UVgyZ5XAqwX6843jdohTjdZi7AUyT2RvkmPh0FlPhxz57UD76MCP6KjjREj0d1R8Tu6uxHS+rMv/eZI1KoEGPxJ1jZVAj+r1gRZ4IVz9Vx5ATfx2ewOEIo+Cn2wyIKxwpApawBL+WeTVizWcCwDDHiMWbCECIRjrfEgYuVEGgp2KIQg+0lMz0HwfsFymswLIC6vbstOzKwbZxWrcqkAKAKYpabEOm2bUFZ9mij8D0nWedM4B2bBalrApJIvePPdHuA9oE/uyQC2z1hX6X1u97Idi1fXqZNCD5Mytdf5N75b/nCdmcQk+tU9RSJDk0MDC+lkBSbqYBvgmT8QNssR1634drhMnaEu7UY7Lpt77dXAtloQ4MZ90Xs=
  distributions: sdist bdist_wheel
  skip_existing: true
